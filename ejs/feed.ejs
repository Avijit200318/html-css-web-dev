<% include ./partials/header.ejs %>
  <div class="w-full min-h-screen bg-black text-white py-5">
    <div class="w-full px-4 flex items-center justify-between">
      <img class="w-[28%]" src="/images/logo2.png" alt="">
      <div class="icons -mt-2 flex gap-5 items-center">
        <i class="text-[1.4rem] ri-heart-3-line"></i>
        <i class="mb-[0.4rem] text-[1.2rem] fa-regular fa-paper-plane fa-rotate-by" style="--fa-rotate-angle: 20deg;""></i>
      </div>
    </div>
    <div class=" story px-3 flex gap-3 overflow-auto mt-5">
          <div class="circle flex-shrink-0">
            <div class="gradient w-[18vw] h-[18vw] bg-black rounded-full flex items-center justify-center relative">
              <div class="inner w-[92%] h-[92%] rounded-full overflow-hidden ">
                <% if(user.profileImage && user.profileImage.contentType && user.profileImage.data){%>
                  <img class="w-full h-full object-cover"
                    src="data:<%= user.profileImage.contentType%>;base64,<%= user.profileImage.data.toString('base64')%>"
                    alt="">
                  <%} %>
              </div>
              <div class="absolute text-white bottom-[5px] right-[-3px] text-[1.1rem] cursor-pointer"><i
                  class="fa-solid fa-circle-plus text-blue-500 bg-white rounded-full border-2 border-black"></i></div>
            </div>
          </div>
          <div class="circle flex-shrink-0">
            <div
              class="gradient w-[18vw] h-[18vw] bg-sky-100 rounded-full bg-gradient-to-r from-purple-700 to-orange-500 flex items-center justify-center">
              <div class="inner w-[92%] h-[92%] rounded-full overflow-hidden">
                <img class="w-full h-full object-cover"
                  src="https://images.unsplash.com/photo-1570158268183-d296b2892211?q=80&w=3456&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                  alt="">
              </div>
            </div>
          </div>
          <div class="circle flex-shrink-0">
            <div
              class="gradient w-[18vw] h-[18vw] bg-sky-100 rounded-full bg-gradient-to-r from-purple-700 to-orange-500 flex items-center justify-center">
              <div class="inner w-[92%] h-[92%] rounded-full overflow-hidden">
                <img class="w-full h-full object-cover"
                  src="https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?q=80&w=2550&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                  alt="">
              </div>
            </div>
          </div>
          <div class="circle flex-shrink-0">
            <div
              class="gradient w-[18vw] h-[18vw] bg-sky-100 rounded-full bg-gradient-to-r from-purple-700 to-orange-500 flex items-center justify-center">
              <div class="inner w-[92%] h-[92%] rounded-full overflow-hidden">
                <img class="w-full h-full object-cover"
                  src="https://images.unsplash.com/photo-1570158268183-d296b2892211?q=80&w=3456&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                  alt="">
              </div>
            </div>
          </div>
          <div class="circle flex-shrink-0">
            <div
              class="gradient w-[18vw] h-[18vw] bg-sky-100 rounded-full bg-gradient-to-r from-purple-700 to-orange-500 flex items-center justify-center">
              <div class="inner w-[92%] h-[92%] rounded-full overflow-hidden">
                <img class="w-full h-full object-cover"
                  src="https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?q=80&w=2550&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                  alt="">
              </div>
            </div>
          </div>
          <div class="circle flex-shrink-0">
            <div
              class="gradient w-[18vw] h-[18vw] bg-sky-100 rounded-full bg-gradient-to-r from-purple-700 to-orange-500 flex items-center justify-center">
              <div class="inner w-[92%] h-[92%] rounded-full overflow-hidden">
                <img class="w-full h-full object-cover"
                  src="https://images.unsplash.com/photo-1570158268183-d296b2892211?q=80&w=3456&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                  alt="">
              </div>
            </div>
          </div>
      </div>
      <div class="posts mb-12">
        <% posts.reverse().forEach(function(ele) { %>
          <div class="post mt-10 w-full min-h-[50vh]">
            <div class="title pl-4 pr-6 flex items-center justify-between">
              <div class="flex items-center gap-2">
                <div class="w-[8vw] h-[8vw] bg-sky-100 rounded-full overflow-hidden">
                  <a href="/profile/<%= ele.user._id%>">
                    <img
                      src="data:<%= ele.user.profileImage.contentType%>;base64,<%= ele.user.profileImage.data.toString('base64')%>"
                      alt="" class="w-full h-full object-cover">
                  </a>
                </div>
                <h4 class="text-sm">
                  <%= ele.user.username %>
                </h4>
                <h6 class="text-xs opacity-30">1d</h6>
              </div>

              <div class="cursor-pointer">
                <i class="fa-solid fa-ellipsis-vertical"></i>
              </div>
            </div>
            <div class="w-full h-96 mt-4 bg-sky-100 overflow-hidden">
              <img src="data:<%= ele.picture.contentType%>;base64,<%= ele.picture.data.toString('base64')%>" alt=""
                class="w-full h-full object-cover">
            </div>
            <div class="options w-full px-4 flex justify-between items-center text-[1.4rem]">
              <div class="flex gap-3 mt-2">
                <a href="/like/post/<%= ele._id%>">
                  <% if(ele.likes.indexOf(user._id) !==-1) {%>
                    <i class="ri-heart-3-fill text-red-600"></i>
                    <% }else{%>
                      <i class="ri-heart-3-line"></i>
                      <%}%>
                </a>
                <i class="ri-chat-3-line"></i>
                <!-- <i class="ri-share-circle-line"></i> -->
                <i class="mt-[0.35rem] text-[1.2rem] fa-regular fa-paper-plane fa-rotate-by"
                  style="--fa-rotate-angle: 20deg;""></i>
            </div>
            <i class=" ri-bookmark-line"></i>
              </div>
              <h3 class="px-4 mt-2 text-sm leading-none tracking-tight">
                <%= ele.likes.length%> likes
              </h3>
              <h2 class="text-white font-light text-sm mt-2"><span class="font-semibold pl-4 pr-2">
                  <%= ele.user.username%>
                </span>
                <%= ele.caption%>
              </h2>
            </div>
            <% }) %>

          </div>
      </div>
      <% include ./partials/footer.ejs %>